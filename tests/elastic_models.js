// isDefined tests
test("cluster creating", function() {

  var state = JSON.parse('{"cluster_name":"elasticsearch","master_node":"F3KsjayGTwSYky6igNwz9w","blocks":{"indices":{"qux":{"4":{"description":"index closed","retryable":false,"levels":["read","write"]}}}},"nodes":{"GuH0hk40ROSf2SRc13U6sw":{"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9300]","attributes":{}},"F3KsjayGTwSYky6igNwz9w":{"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9301]","attributes":{}}},"routing_table":{"indices":{"foobar":{"shards":{"0":[{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sw","relocating_node":null,"shard":0,"index":"foobar"}],"1":[{"state":"STARTED","primary":true,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":1,"index":"foobar"}]}},"foobaz":{"shards":{"0":[{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sw","relocating_node":null,"shard":0,"index":"foobaz"},{"state":"STARTED","primary":false,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":0,"index":"foobaz"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":0,"index":"foobaz"}]}}}},"routing_nodes":{"unassigned":[{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":0,"index":"foobaz"}],"nodes":{"GuH0hk40ROSf2SRc13U6sw":[{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sw","relocating_node":null,"shard":0,"index":"foobar"},{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sw","relocating_node":null,"shard":0,"index":"foobaz"}],"F3KsjayGTwSYky6igNwz9w":[{"state":"STARTED","primary":true,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":1,"index":"foobar"},{"state":"STARTED","primary":false,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":0,"index":"foobaz"}]}},"allocations":[]}');
  var indexStats = JSON.parse('{"_shards":{"total":5,"successful":4,"failed":0},"_all":{"primaries":{"docs":{"count":8,"deleted":0},"store":{"size_in_bytes":6909,"throttle_time_in_millis":0}},"total":{"docs":{"count":8,"deleted":0},"store":{"size_in_bytes":6988,"throttle_time_in_millis":0}}},"indices":{"foobar":{"primaries":{"docs":{"count":8,"deleted":0},"store":{"size_in_bytes":6794,"throttle_time_in_millis":0}},"total":{"docs":{"count":8,"deleted":0},"store":{"size_in_bytes":6794,"throttle_time_in_millis":0}}},"foobaz":{"primaries":{"docs":{"count":0,"deleted":0},"store":{"size_in_bytes":115,"throttle_time_in_millis":0}},"total":{"docs":{"count":0,"deleted":0},"store":{"size_in_bytes":194,"throttle_time_in_millis":0}}}}}');
  var nodeStats = JSON.parse('{"cluster_name":"elasticsearch","nodes":{"GuH0hk40ROSf2SRc13U6sw":{"timestamp":1427818890923,"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9300]","host":"nb-lmenezes","ip":["inet[/192.168.2.39:9300]","NONE"],"indices":{"docs":{"count":4,"deleted":0},"store":{"size_in_bytes":3512,"throttle_time_in_millis":0},"indexing":{"index_total":16,"index_time_in_millis":72,"index_current":0,"delete_total":0,"delete_time_in_millis":0,"delete_current":0,"noop_update_total":0,"is_throttled":false,"throttle_time_in_millis":0},"get":{"total":0,"time_in_millis":0,"exists_total":0,"exists_time_in_millis":0,"missing_total":0,"missing_time_in_millis":0,"current":0},"search":{"open_contexts":0,"query_total":0,"query_time_in_millis":0,"query_current":0,"fetch_total":0,"fetch_time_in_millis":0,"fetch_current":0},"merges":{"current":0,"current_docs":0,"current_size_in_bytes":0,"total":0,"total_time_in_millis":0,"total_docs":0,"total_size_in_bytes":0},"refresh":{"total":16,"total_time_in_millis":136},"flush":{"total":0,"total_time_in_millis":0},"warmer":{"current":0,"total":6,"total_time_in_millis":1},"filter_cache":{"memory_size_in_bytes":0,"evictions":0},"id_cache":{"memory_size_in_bytes":0},"fielddata":{"memory_size_in_bytes":0,"evictions":0},"percolate":{"total":0,"time_in_millis":0,"current":0,"memory_size_in_bytes":-1,"memory_size":"-1b","queries":0},"completion":{"size_in_bytes":0},"segments":{"count":1,"memory_in_bytes":8738,"index_writer_memory_in_bytes":0,"index_writer_max_memory_in_bytes":134217728,"version_map_memory_in_bytes":0,"fixed_bit_set_memory_in_bytes":96},"translog":{"operations":4,"size_in_bytes":17},"suggest":{"total":0,"time_in_millis":0,"current":0},"query_cache":{"memory_size_in_bytes":0,"evictions":0,"hit_count":0,"miss_count":0}},"os":{"timestamp":1427818890924,"uptime_in_millis":375434,"load_average":[2.767578125,2.66650390625,2.46484375],"cpu":{"sys":4,"user":14,"idle":81,"usage":18,"stolen":0},"mem":{"free_in_bytes":152559616,"used_in_bytes":8437374976,"free_percent":26,"used_percent":73,"actual_free_in_bytes":2301149184,"actual_used_in_bytes":6288785408},"swap":{"used_in_bytes":469499904,"free_in_bytes":604241920}},"process":{"timestamp":1427818890924,"open_file_descriptors":281,"cpu":{"percent":3,"sys_in_millis":1910,"user_in_millis":14999,"total_in_millis":16909},"mem":{"resident_in_bytes":346849280,"share_in_bytes":-1,"total_virtual_in_bytes":5256888320}},"jvm":{"timestamp":1427818890924,"uptime_in_millis":171737,"mem":{"heap_used_in_bytes":88669488,"heap_used_percent":8,"heap_committed_in_bytes":259522560,"heap_max_in_bytes":1037959168,"non_heap_used_in_bytes":55332224,"non_heap_committed_in_bytes":56311808,"pools":{"young":{"used_in_bytes":60449896,"max_in_bytes":286326784,"peak_used_in_bytes":71630848,"peak_max_in_bytes":286326784},"survivor":{"used_in_bytes":8912896,"max_in_bytes":35782656,"peak_used_in_bytes":8912896,"peak_max_in_bytes":35782656},"old":{"used_in_bytes":19306696,"max_in_bytes":715849728,"peak_used_in_bytes":19306696,"peak_max_in_bytes":715849728}}},"threads":{"count":88,"peak_count":88},"gc":{"collectors":{"young":{"collection_count":4,"collection_time_in_millis":56},"old":{"collection_count":1,"collection_time_in_millis":10}}},"buffer_pools":{"direct":{"count":131,"used_in_bytes":25261747,"total_capacity_in_bytes":25261747},"mapped":{"count":0,"used_in_bytes":0,"total_capacity_in_bytes":0}}},"thread_pool":{"percolate":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"bench":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"listener":{"threads":4,"queue":0,"active":0,"rejected":0,"largest":4,"completed":427},"index":{"threads":8,"queue":0,"active":0,"rejected":0,"largest":8,"completed":16},"refresh":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":8},"suggest":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"generic":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":4,"completed":273},"warmer":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":24},"search":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"flush":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":3},"optimize":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"management":{"threads":5,"queue":0,"active":1,"rejected":0,"largest":5,"completed":306},"get":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"merge":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":4},"bulk":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"snapshot":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0}},"network":{"tcp":{"active_opens":74884,"passive_opens":1563,"curr_estab":190,"in_segs":13376197,"out_segs":13484803,"retrans_segs":16615,"estab_resets":7275,"attempt_fails":2949,"in_errs":0,"out_rsts":-1}},"fs":{"timestamp":1427818890925,"total":{"total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0},"data":[{"path":"/Users/leonardo.menezes/Downloads/elasticsearch-1.4.1/data/elasticsearch/nodes/0","mount":"/","dev":"/dev/disk1","total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0}]},"transport":{"server_open":26,"rx_count":1319,"rx_size_in_bytes":445061,"tx_count":1297,"tx_size_in_bytes":101144},"http":{"current_open":12,"total_opened":111},"breakers":{"fielddata":{"limit_size_in_bytes":622775500,"limit_size":"593.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.03,"tripped":0},"request":{"limit_size_in_bytes":415183667,"limit_size":"395.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0},"parent":{"limit_size_in_bytes":726571417,"limit_size":"692.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0}}},"F3KsjayGTwSYky6igNwz9w":{"timestamp":1427818890923,"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9301]","host":"nb-lmenezes","ip":["inet[/192.168.2.39:9301]","NONE"],"indices":{"docs":{"count":4,"deleted":0},"store":{"size_in_bytes":3476,"throttle_time_in_millis":0},"indexing":{"index_total":16,"index_time_in_millis":66,"index_current":0,"delete_total":0,"delete_time_in_millis":0,"delete_current":0,"noop_update_total":0,"is_throttled":false,"throttle_time_in_millis":0},"get":{"total":0,"time_in_millis":0,"exists_total":0,"exists_time_in_millis":0,"missing_total":0,"missing_time_in_millis":0,"current":0},"search":{"open_contexts":0,"query_total":0,"query_time_in_millis":0,"query_current":0,"fetch_total":0,"fetch_time_in_millis":0,"fetch_current":0},"merges":{"current":0,"current_docs":0,"current_size_in_bytes":0,"total":0,"total_time_in_millis":0,"total_docs":0,"total_size_in_bytes":0},"refresh":{"total":17,"total_time_in_millis":114},"flush":{"total":0,"total_time_in_millis":0},"warmer":{"current":0,"total":6,"total_time_in_millis":1},"filter_cache":{"memory_size_in_bytes":0,"evictions":0},"id_cache":{"memory_size_in_bytes":0},"fielddata":{"memory_size_in_bytes":0,"evictions":0},"percolate":{"total":0,"time_in_millis":0,"current":0,"memory_size_in_bytes":-1,"memory_size":"-1b","queries":0},"completion":{"size_in_bytes":0},"segments":{"count":1,"memory_in_bytes":8738,"index_writer_memory_in_bytes":0,"index_writer_max_memory_in_bytes":134217728,"version_map_memory_in_bytes":0,"fixed_bit_set_memory_in_bytes":48},"translog":{"operations":4,"size_in_bytes":0},"suggest":{"total":0,"time_in_millis":0,"current":0},"query_cache":{"memory_size_in_bytes":0,"evictions":0,"hit_count":0,"miss_count":0}},"os":{"timestamp":1427818890924,"uptime_in_millis":375434,"load_average":[2.767578125,2.66650390625,2.46484375],"cpu":{"sys":4,"user":14,"idle":81,"usage":18,"stolen":0},"mem":{"free_in_bytes":152559616,"used_in_bytes":8437374976,"free_percent":26,"used_percent":73,"actual_free_in_bytes":2301149184,"actual_used_in_bytes":6288785408},"swap":{"used_in_bytes":469499904,"free_in_bytes":604241920}},"process":{"timestamp":1427818890924,"open_file_descriptors":269,"cpu":{"percent":2,"sys_in_millis":7960,"user_in_millis":22082,"total_in_millis":30042},"mem":{"resident_in_bytes":264425472,"share_in_bytes":-1,"total_virtual_in_bytes":5242892288}},"jvm":{"timestamp":1427818890924,"uptime_in_millis":1260290,"mem":{"heap_used_in_bytes":80714736,"heap_used_percent":7,"heap_committed_in_bytes":259522560,"heap_max_in_bytes":1037959168,"non_heap_used_in_bytes":55446520,"non_heap_committed_in_bytes":56246272,"pools":{"young":{"used_in_bytes":57928496,"max_in_bytes":286326784,"peak_used_in_bytes":71630848,"peak_max_in_bytes":286326784},"survivor":{"used_in_bytes":6086936,"max_in_bytes":35782656,"peak_used_in_bytes":8912896,"peak_max_in_bytes":35782656},"old":{"used_in_bytes":16699304,"max_in_bytes":715849728,"peak_used_in_bytes":16699304,"peak_max_in_bytes":715849728}}},"threads":{"count":89,"peak_count":91},"gc":{"collectors":{"young":{"collection_count":5,"collection_time_in_millis":64},"old":{"collection_count":1,"collection_time_in_millis":14}}},"buffer_pools":{"direct":{"count":97,"used_in_bytes":19931794,"total_capacity_in_bytes":19931794},"mapped":{"count":0,"used_in_bytes":0,"total_capacity_in_bytes":0}}},"thread_pool":{"percolate":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"bench":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"listener":{"threads":4,"queue":0,"active":0,"rejected":0,"largest":4,"completed":427},"index":{"threads":8,"queue":0,"active":0,"rejected":0,"largest":8,"completed":16},"refresh":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":8},"suggest":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"generic":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":5,"completed":1479},"warmer":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":30},"search":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"flush":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":3},"optimize":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"management":{"threads":5,"queue":0,"active":1,"rejected":0,"largest":5,"completed":6381},"get":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"merge":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":4},"bulk":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"snapshot":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0}},"network":{"tcp":{"active_opens":74884,"passive_opens":1563,"curr_estab":190,"in_segs":13376197,"out_segs":13484803,"retrans_segs":16615,"estab_resets":7275,"attempt_fails":2949,"in_errs":0,"out_rsts":-1}},"fs":{"timestamp":1427818890925,"total":{"total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0},"data":[{"path":"/Users/leonardo.menezes/Downloads/elasticsearch-1.4.1/data/elasticsearch/nodes/1","mount":"/","dev":"/dev/disk1","total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0}]},"transport":{"server_open":26,"rx_count":9616,"rx_size_in_bytes":748959,"tx_count":9607,"tx_size_in_bytes":1999112},"http":{"current_open":0,"total_opened":0},"breakers":{"fielddata":{"limit_size_in_bytes":622775500,"limit_size":"593.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.03,"tripped":0},"request":{"limit_size_in_bytes":415183667,"limit_size":"395.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0},"parent":{"limit_size_in_bytes":726571417,"limit_size":"692.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0}}}}}');
  var settings = JSON.parse('{"foobaz":{"settings":{"index":{"creation_date":"1427818889470","analysis":{"analyzer":{"index_inc_search":{"filter":["lowercase"],"tokenizer":"whitespace"}}},"number_of_shards":"1","number_of_replicas":"2","version":{"created":"1040199"},"uuid":"4Ve107bNSh6modc72wM55Q"}}},"foobar":{"settings":{"index":{"creation_date":"1427818889366","analysis":{"analyzer":{"index_inc_search":{"filter":["lowercase"],"tokenizer":"whitespace"}}},"number_of_shards":"2","number_of_replicas":"0","version":{"created":"1040199"},"uuid":"kYsuZGfTQwOeD_iRtCZJ6A"}}}}');
  var aliases = JSON.parse('{"foobaz":{},"foobar":{},"qux":{}}');
  var health = JSON.parse('{"cluster_name":"elasticsearch","status":"yellow","timed_out":false,"number_of_nodes":2,"number_of_data_nodes":2,"active_primary_shards":3,"active_shards":4,"relocating_shards":0,"initializing_shards":0,"unassigned_shards":1}');

  var cluster = new Cluster(health, state, indexStats, nodeStats, settings, aliases);

  var size_pattern = /\d+\.\d+\w{1,2}/;
  var number_pattern = /\d+/;

  // check clustercluster properties
  equal(cluster.num_docs, 8, "Number of documents");
  //equal(cluster.total_size == '16.49KB', "Checking total size");
  equal(cluster.unassigned_shards, 1, "Unassigned shards");
  equal(cluster.shards, 5, "Number of shards");
  equal(cluster.total_indices, 3, "Number of indices");
  var master_node = cluster.master_node;

  // index info
  ok(cluster.indices.length, 3, "Indices list length");

  var indices = cluster.indices;
  indices.forEach(function(index) {
    ok(index.state == 'open' || index.state == 'close',
        "Checking index state: [" + index.state + "]");
    ok(number_pattern.test(index.size),
        "Checking primary size: [" + index.size + "]");
    ok(number_pattern.test(index.total_size),
        "Checking total size: [" + index.total_size + "]");
    if (index.state == 'open') {
      ok(size_pattern.test(index.size_in_bytes),
          "Checking primary size: [" + index.size_in_bytes + "]");
      ok(size_pattern.test(index.total_size_in_bytes),
          "Checking total size: [" + index.total_size_in_bytes + "]");
    }
    ok(number_pattern.test(index.num_docs),
        "Checking num docs: [" + index.num_docs + "]");
    ok(number_pattern.test(index.deleted_docs),
        "Checking deleted docs: [" + index.deleted_docs + "]");
    ok(index.name.length > 0, "Checking index name: [" + index.name + "]");
    ok(number_pattern.test(index.num_of_shards),
        "Checking number of shards: [" + index.num_of_shards + "]");
    ok(number_pattern.test(index.num_of_replicas),
        "Checking number of replicas: [" + index.num_of_replicas + "]");
    var node_ids = cluster.getNodes(true).map(function(node) {
      return node.id;
    });
    node_ids.forEach(function(node_id) {
      if (cluster.getShards(node_id, index.id) != null) {
        cluster.getShards(node_id, index.id).forEach(function(shard) {
          ok(shard.primary == true || shard.primary == false,
              "Checking primary status: [" + shard.primary + "]");
          equal(shard.node, node_id,
              "Shards should have referece to correct node");
          ok(shard.state == 'STARTED',
              "Shards should be started: [" + shard.state + "]");
        });
      }
    });

  });

  // check nodes
  var nodes = cluster.getNodes();
  equal(nodes.length, 2, "Unfiltered node list");
  var master_nodes = 0;
  nodes.forEach(function(node) {
    ok(size_pattern.test(node.disk_total),
        "Checking disk total [" + node.disk_total + "]");
    ok(size_pattern.test(node.disk_free),
        "Checking free disk [" + node.disk_total + "]");
    ok(node.disk_used_percent >= 0 && node.disk_used_percent <= 100,
        "Checking disk usage in percent [" + node.disk_used_percent + "]");
    ok(size_pattern.test(node.heap_used),
        "Checking node heap used [" + node.heap_used + "]");
    ok(size_pattern.test(node.heap_committed),
        "Checking node heap commited [" + node.heap_committed + "]");
    ok(size_pattern.test(node.heap_max),
        "Checking max heap size [" + node.heap_max + "]");
    ok(node.heap_used_percent >= 0 && node.heap_used_percent <= 100,
        "Checking heap used percent [" + node.heap_used_percent + "]");
    ok(node.cpu_user >= 0 && number_pattern.test(node.cpu_user),
        "Checking os user cpu [" + node.cpu_user + "]");
    ok(node.cpu_sys >= 0 && number_pattern.test(node.cpu_sys),
        "Checking os sys cpu [" + node.cpu_sys + "]");
    equal(node.id.length, 22, "Checking node id length");
    if (node.current_master) {
      master_nodes += 1;
      equal(master_node, node.id, "Checking current master");
    }
  });
  equal(master_nodes, 1, "There should be exactly one master node");
});

test("computing cluster changes", function() {
  var state = JSON.parse('{"cluster_name":"elasticsearch","master_node":"F3KsjayGTwSYky6igNwz9w","blocks":{"indices":{"qux":{"4":{"description":"index closed","retryable":false,"levels":["read","write"]}}}},"nodes":{"GuH0hk40ROSf2SRc13U6sw":{"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9300]","attributes":{}},"F3KsjayGTwSYky6igNwz9w":{"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9301]","attributes":{}}},"routing_table":{"indices":{"foobar":{"shards":{"0":[{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sw","relocating_node":null,"shard":0,"index":"foobar"}],"1":[{"state":"STARTED","primary":true,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":1,"index":"foobar"}]}},"foobaz":{"shards":{"0":[{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sw","relocating_node":null,"shard":0,"index":"foobaz"},{"state":"STARTED","primary":false,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":0,"index":"foobaz"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":0,"index":"foobaz"}]}}}},"routing_nodes":{"unassigned":[{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":0,"index":"foobaz"}],"nodes":{"GuH0hk40ROSf2SRc13U6sw":[{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sw","relocating_node":null,"shard":0,"index":"foobar"},{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sw","relocating_node":null,"shard":0,"index":"foobaz"}],"F3KsjayGTwSYky6igNwz9w":[{"state":"STARTED","primary":true,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":1,"index":"foobar"},{"state":"STARTED","primary":false,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":0,"index":"foobaz"}]}},"allocations":[]}');
  var indexStats = JSON.parse('{"_shards":{"total":5,"successful":4,"failed":0},"_all":{"primaries":{"docs":{"count":8,"deleted":0},"store":{"size_in_bytes":6909,"throttle_time_in_millis":0}},"total":{"docs":{"count":8,"deleted":0},"store":{"size_in_bytes":6988,"throttle_time_in_millis":0}}},"indices":{"foobar":{"primaries":{"docs":{"count":8,"deleted":0},"store":{"size_in_bytes":6794,"throttle_time_in_millis":0}},"total":{"docs":{"count":8,"deleted":0},"store":{"size_in_bytes":6794,"throttle_time_in_millis":0}}},"foobaz":{"primaries":{"docs":{"count":0,"deleted":0},"store":{"size_in_bytes":115,"throttle_time_in_millis":0}},"total":{"docs":{"count":0,"deleted":0},"store":{"size_in_bytes":194,"throttle_time_in_millis":0}}}}}');
  var nodeStats = JSON.parse('{"cluster_name":"elasticsearch","nodes":{"GuH0hk40ROSf2SRc13U6sw":{"timestamp":1427818890923,"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9300]","host":"nb-lmenezes","ip":["inet[/192.168.2.39:9300]","NONE"],"indices":{"docs":{"count":4,"deleted":0},"store":{"size_in_bytes":3512,"throttle_time_in_millis":0},"indexing":{"index_total":16,"index_time_in_millis":72,"index_current":0,"delete_total":0,"delete_time_in_millis":0,"delete_current":0,"noop_update_total":0,"is_throttled":false,"throttle_time_in_millis":0},"get":{"total":0,"time_in_millis":0,"exists_total":0,"exists_time_in_millis":0,"missing_total":0,"missing_time_in_millis":0,"current":0},"search":{"open_contexts":0,"query_total":0,"query_time_in_millis":0,"query_current":0,"fetch_total":0,"fetch_time_in_millis":0,"fetch_current":0},"merges":{"current":0,"current_docs":0,"current_size_in_bytes":0,"total":0,"total_time_in_millis":0,"total_docs":0,"total_size_in_bytes":0},"refresh":{"total":16,"total_time_in_millis":136},"flush":{"total":0,"total_time_in_millis":0},"warmer":{"current":0,"total":6,"total_time_in_millis":1},"filter_cache":{"memory_size_in_bytes":0,"evictions":0},"id_cache":{"memory_size_in_bytes":0},"fielddata":{"memory_size_in_bytes":0,"evictions":0},"percolate":{"total":0,"time_in_millis":0,"current":0,"memory_size_in_bytes":-1,"memory_size":"-1b","queries":0},"completion":{"size_in_bytes":0},"segments":{"count":1,"memory_in_bytes":8738,"index_writer_memory_in_bytes":0,"index_writer_max_memory_in_bytes":134217728,"version_map_memory_in_bytes":0,"fixed_bit_set_memory_in_bytes":96},"translog":{"operations":4,"size_in_bytes":17},"suggest":{"total":0,"time_in_millis":0,"current":0},"query_cache":{"memory_size_in_bytes":0,"evictions":0,"hit_count":0,"miss_count":0}},"os":{"timestamp":1427818890924,"uptime_in_millis":375434,"load_average":[2.767578125,2.66650390625,2.46484375],"cpu":{"sys":4,"user":14,"idle":81,"usage":18,"stolen":0},"mem":{"free_in_bytes":152559616,"used_in_bytes":8437374976,"free_percent":26,"used_percent":73,"actual_free_in_bytes":2301149184,"actual_used_in_bytes":6288785408},"swap":{"used_in_bytes":469499904,"free_in_bytes":604241920}},"process":{"timestamp":1427818890924,"open_file_descriptors":281,"cpu":{"percent":3,"sys_in_millis":1910,"user_in_millis":14999,"total_in_millis":16909},"mem":{"resident_in_bytes":346849280,"share_in_bytes":-1,"total_virtual_in_bytes":5256888320}},"jvm":{"timestamp":1427818890924,"uptime_in_millis":171737,"mem":{"heap_used_in_bytes":88669488,"heap_used_percent":8,"heap_committed_in_bytes":259522560,"heap_max_in_bytes":1037959168,"non_heap_used_in_bytes":55332224,"non_heap_committed_in_bytes":56311808,"pools":{"young":{"used_in_bytes":60449896,"max_in_bytes":286326784,"peak_used_in_bytes":71630848,"peak_max_in_bytes":286326784},"survivor":{"used_in_bytes":8912896,"max_in_bytes":35782656,"peak_used_in_bytes":8912896,"peak_max_in_bytes":35782656},"old":{"used_in_bytes":19306696,"max_in_bytes":715849728,"peak_used_in_bytes":19306696,"peak_max_in_bytes":715849728}}},"threads":{"count":88,"peak_count":88},"gc":{"collectors":{"young":{"collection_count":4,"collection_time_in_millis":56},"old":{"collection_count":1,"collection_time_in_millis":10}}},"buffer_pools":{"direct":{"count":131,"used_in_bytes":25261747,"total_capacity_in_bytes":25261747},"mapped":{"count":0,"used_in_bytes":0,"total_capacity_in_bytes":0}}},"thread_pool":{"percolate":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"bench":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"listener":{"threads":4,"queue":0,"active":0,"rejected":0,"largest":4,"completed":427},"index":{"threads":8,"queue":0,"active":0,"rejected":0,"largest":8,"completed":16},"refresh":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":8},"suggest":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"generic":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":4,"completed":273},"warmer":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":24},"search":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"flush":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":3},"optimize":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"management":{"threads":5,"queue":0,"active":1,"rejected":0,"largest":5,"completed":306},"get":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"merge":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":4},"bulk":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"snapshot":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0}},"network":{"tcp":{"active_opens":74884,"passive_opens":1563,"curr_estab":190,"in_segs":13376197,"out_segs":13484803,"retrans_segs":16615,"estab_resets":7275,"attempt_fails":2949,"in_errs":0,"out_rsts":-1}},"fs":{"timestamp":1427818890925,"total":{"total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0},"data":[{"path":"/Users/leonardo.menezes/Downloads/elasticsearch-1.4.1/data/elasticsearch/nodes/0","mount":"/","dev":"/dev/disk1","total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0}]},"transport":{"server_open":26,"rx_count":1319,"rx_size_in_bytes":445061,"tx_count":1297,"tx_size_in_bytes":101144},"http":{"current_open":12,"total_opened":111},"breakers":{"fielddata":{"limit_size_in_bytes":622775500,"limit_size":"593.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.03,"tripped":0},"request":{"limit_size_in_bytes":415183667,"limit_size":"395.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0},"parent":{"limit_size_in_bytes":726571417,"limit_size":"692.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0}}},"F3KsjayGTwSYky6igNwz9w":{"timestamp":1427818890923,"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9301]","host":"nb-lmenezes","ip":["inet[/192.168.2.39:9301]","NONE"],"indices":{"docs":{"count":4,"deleted":0},"store":{"size_in_bytes":3476,"throttle_time_in_millis":0},"indexing":{"index_total":16,"index_time_in_millis":66,"index_current":0,"delete_total":0,"delete_time_in_millis":0,"delete_current":0,"noop_update_total":0,"is_throttled":false,"throttle_time_in_millis":0},"get":{"total":0,"time_in_millis":0,"exists_total":0,"exists_time_in_millis":0,"missing_total":0,"missing_time_in_millis":0,"current":0},"search":{"open_contexts":0,"query_total":0,"query_time_in_millis":0,"query_current":0,"fetch_total":0,"fetch_time_in_millis":0,"fetch_current":0},"merges":{"current":0,"current_docs":0,"current_size_in_bytes":0,"total":0,"total_time_in_millis":0,"total_docs":0,"total_size_in_bytes":0},"refresh":{"total":17,"total_time_in_millis":114},"flush":{"total":0,"total_time_in_millis":0},"warmer":{"current":0,"total":6,"total_time_in_millis":1},"filter_cache":{"memory_size_in_bytes":0,"evictions":0},"id_cache":{"memory_size_in_bytes":0},"fielddata":{"memory_size_in_bytes":0,"evictions":0},"percolate":{"total":0,"time_in_millis":0,"current":0,"memory_size_in_bytes":-1,"memory_size":"-1b","queries":0},"completion":{"size_in_bytes":0},"segments":{"count":1,"memory_in_bytes":8738,"index_writer_memory_in_bytes":0,"index_writer_max_memory_in_bytes":134217728,"version_map_memory_in_bytes":0,"fixed_bit_set_memory_in_bytes":48},"translog":{"operations":4,"size_in_bytes":0},"suggest":{"total":0,"time_in_millis":0,"current":0},"query_cache":{"memory_size_in_bytes":0,"evictions":0,"hit_count":0,"miss_count":0}},"os":{"timestamp":1427818890924,"uptime_in_millis":375434,"load_average":[2.767578125,2.66650390625,2.46484375],"cpu":{"sys":4,"user":14,"idle":81,"usage":18,"stolen":0},"mem":{"free_in_bytes":152559616,"used_in_bytes":8437374976,"free_percent":26,"used_percent":73,"actual_free_in_bytes":2301149184,"actual_used_in_bytes":6288785408},"swap":{"used_in_bytes":469499904,"free_in_bytes":604241920}},"process":{"timestamp":1427818890924,"open_file_descriptors":269,"cpu":{"percent":2,"sys_in_millis":7960,"user_in_millis":22082,"total_in_millis":30042},"mem":{"resident_in_bytes":264425472,"share_in_bytes":-1,"total_virtual_in_bytes":5242892288}},"jvm":{"timestamp":1427818890924,"uptime_in_millis":1260290,"mem":{"heap_used_in_bytes":80714736,"heap_used_percent":7,"heap_committed_in_bytes":259522560,"heap_max_in_bytes":1037959168,"non_heap_used_in_bytes":55446520,"non_heap_committed_in_bytes":56246272,"pools":{"young":{"used_in_bytes":57928496,"max_in_bytes":286326784,"peak_used_in_bytes":71630848,"peak_max_in_bytes":286326784},"survivor":{"used_in_bytes":6086936,"max_in_bytes":35782656,"peak_used_in_bytes":8912896,"peak_max_in_bytes":35782656},"old":{"used_in_bytes":16699304,"max_in_bytes":715849728,"peak_used_in_bytes":16699304,"peak_max_in_bytes":715849728}}},"threads":{"count":89,"peak_count":91},"gc":{"collectors":{"young":{"collection_count":5,"collection_time_in_millis":64},"old":{"collection_count":1,"collection_time_in_millis":14}}},"buffer_pools":{"direct":{"count":97,"used_in_bytes":19931794,"total_capacity_in_bytes":19931794},"mapped":{"count":0,"used_in_bytes":0,"total_capacity_in_bytes":0}}},"thread_pool":{"percolate":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"bench":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"listener":{"threads":4,"queue":0,"active":0,"rejected":0,"largest":4,"completed":427},"index":{"threads":8,"queue":0,"active":0,"rejected":0,"largest":8,"completed":16},"refresh":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":8},"suggest":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"generic":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":5,"completed":1479},"warmer":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":30},"search":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"flush":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":3},"optimize":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"management":{"threads":5,"queue":0,"active":1,"rejected":0,"largest":5,"completed":6381},"get":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"merge":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":4},"bulk":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"snapshot":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0}},"network":{"tcp":{"active_opens":74884,"passive_opens":1563,"curr_estab":190,"in_segs":13376197,"out_segs":13484803,"retrans_segs":16615,"estab_resets":7275,"attempt_fails":2949,"in_errs":0,"out_rsts":-1}},"fs":{"timestamp":1427818890925,"total":{"total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0},"data":[{"path":"/Users/leonardo.menezes/Downloads/elasticsearch-1.4.1/data/elasticsearch/nodes/1","mount":"/","dev":"/dev/disk1","total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0}]},"transport":{"server_open":26,"rx_count":9616,"rx_size_in_bytes":748959,"tx_count":9607,"tx_size_in_bytes":1999112},"http":{"current_open":0,"total_opened":0},"breakers":{"fielddata":{"limit_size_in_bytes":622775500,"limit_size":"593.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.03,"tripped":0},"request":{"limit_size_in_bytes":415183667,"limit_size":"395.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0},"parent":{"limit_size_in_bytes":726571417,"limit_size":"692.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0}}}}}');
  var settings = JSON.parse('{"foobaz":{"settings":{"index":{"creation_date":"1427818889470","analysis":{"analyzer":{"index_inc_search":{"filter":["lowercase"],"tokenizer":"whitespace"}}},"number_of_shards":"1","number_of_replicas":"2","version":{"created":"1040199"},"uuid":"4Ve107bNSh6modc72wM55Q"}}},"foobar":{"settings":{"index":{"creation_date":"1427818889366","analysis":{"analyzer":{"index_inc_search":{"filter":["lowercase"],"tokenizer":"whitespace"}}},"number_of_shards":"2","number_of_replicas":"0","version":{"created":"1040199"},"uuid":"kYsuZGfTQwOeD_iRtCZJ6A"}}}}');
  var aliases = JSON.parse('{"foobaz":{},"foobar":{},"qux":{}}');
  var health = JSON.parse('{"cluster_name":"elasticsearch","status":"yellow","timed_out":false,"number_of_nodes":2,"number_of_data_nodes":2,"active_primary_shards":3,"active_shards":4,"relocating_shards":0,"initializing_shards":0,"unassigned_shards":1}');
  var cluster = new Cluster(health, state, indexStats, nodeStats, settings, aliases);

  var state2 = JSON.parse('{"cluster_name":"elasticsearch","master_node":"F3KsjayGTwSYky6igNwz9w","blocks":{"indices":{"qux":{"4":{"description":"index closed","retryable":false,"levels":["read","write"]}}}},"nodes":{"GuH0hk40ROSf2SRc13U6sf":{"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9300]","attributes":{}},"F3KsjayGTwSYky6igNwz9w":{"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9301]","attributes":{}}},"routing_table":{"indices":{"foobar":{"shards":{"0":[{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sf","relocating_node":null,"shard":0,"index":"foobar"}],"1":[{"state":"STARTED","primary":true,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":1,"index":"foobar"}]}},"foobaz":{"shards":{"0":[{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sf","relocating_node":null,"shard":0,"index":"foobaz"},{"state":"STARTED","primary":false,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":0,"index":"foobaz"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":0,"index":"foobaz"}]}}}},"routing_nodes":{"unassigned":[{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":0,"index":"foobaz"}],"nodes":{"GuH0hk40ROSf2SRc13U6sf":[{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sf","relocating_node":null,"shard":0,"index":"foobar"},{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sf","relocating_node":null,"shard":0,"index":"foobaz"}],"F3KsjayGTwSYky6igNwz9w":[{"state":"STARTED","primary":true,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":1,"index":"foobar"},{"state":"STARTED","primary":false,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":0,"index":"foobaz"}]}},"allocations":[]}');
  var indexStats2 = JSON.parse('{"_shards":{"total":5,"successful":4,"failed":0},"_all":{"primaries":{"docs":{"count":7,"deleted":0},"store":{"size_in_bytes":7909,"throttle_time_in_millis":0}},"total":{"docs":{"count":8,"deleted":0},"store":{"size_in_bytes":7988,"throttle_time_in_millis":0}}},"indices":{"foobar":{"primaries":{"docs":{"count":7,"deleted":0},"store":{"size_in_bytes":7794,"throttle_time_in_millis":0}},"total":{"docs":{"count":8,"deleted":0},"store":{"size_in_bytes":7794,"throttle_time_in_millis":0}}},"foobaz":{"primaries":{"docs":{"count":0,"deleted":0},"store":{"size_in_bytes":115,"throttle_time_in_millis":0}},"total":{"docs":{"count":0,"deleted":0},"store":{"size_in_bytes":194,"throttle_time_in_millis":0}}}}}');
  var nodeStats2 = JSON.parse('{"cluster_name":"elasticsearch","nodes":{"GuH0hk40ROSf2SRc13U6sf":{"timestamp":1427818890923,"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9300]","host":"nb-lmenezes","ip":["inet[/192.168.2.39:9300]","NONE"],"indices":{"docs":{"count":4,"deleted":0},"store":{"size_in_bytes":3512,"throttle_time_in_millis":0},"indexing":{"index_total":16,"index_time_in_millis":72,"index_current":0,"delete_total":0,"delete_time_in_millis":0,"delete_current":0,"noop_update_total":0,"is_throttled":false,"throttle_time_in_millis":0},"get":{"total":0,"time_in_millis":0,"exists_total":0,"exists_time_in_millis":0,"missing_total":0,"missing_time_in_millis":0,"current":0},"search":{"open_contexts":0,"query_total":0,"query_time_in_millis":0,"query_current":0,"fetch_total":0,"fetch_time_in_millis":0,"fetch_current":0},"merges":{"current":0,"current_docs":0,"current_size_in_bytes":0,"total":0,"total_time_in_millis":0,"total_docs":0,"total_size_in_bytes":0},"refresh":{"total":16,"total_time_in_millis":136},"flush":{"total":0,"total_time_in_millis":0},"warmer":{"current":0,"total":6,"total_time_in_millis":1},"filter_cache":{"memory_size_in_bytes":0,"evictions":0},"id_cache":{"memory_size_in_bytes":0},"fielddata":{"memory_size_in_bytes":0,"evictions":0},"percolate":{"total":0,"time_in_millis":0,"current":0,"memory_size_in_bytes":-1,"memory_size":"-1b","queries":0},"completion":{"size_in_bytes":0},"segments":{"count":1,"memory_in_bytes":8738,"index_writer_memory_in_bytes":0,"index_writer_max_memory_in_bytes":134217728,"version_map_memory_in_bytes":0,"fixed_bit_set_memory_in_bytes":96},"translog":{"operations":4,"size_in_bytes":17},"suggest":{"total":0,"time_in_millis":0,"current":0},"query_cache":{"memory_size_in_bytes":0,"evictions":0,"hit_count":0,"miss_count":0}},"os":{"timestamp":1427818890924,"uptime_in_millis":375434,"load_average":[2.767578125,2.66650390625,2.46484375],"cpu":{"sys":4,"user":14,"idle":81,"usage":18,"stolen":0},"mem":{"free_in_bytes":152559616,"used_in_bytes":8437374976,"free_percent":26,"used_percent":73,"actual_free_in_bytes":2301149184,"actual_used_in_bytes":6288785408},"swap":{"used_in_bytes":469499904,"free_in_bytes":604241920}},"process":{"timestamp":1427818890924,"open_file_descriptors":281,"cpu":{"percent":3,"sys_in_millis":1910,"user_in_millis":14999,"total_in_millis":16909},"mem":{"resident_in_bytes":346849280,"share_in_bytes":-1,"total_virtual_in_bytes":5256888320}},"jvm":{"timestamp":1427818890924,"uptime_in_millis":171737,"mem":{"heap_used_in_bytes":88669488,"heap_used_percent":8,"heap_committed_in_bytes":259522560,"heap_max_in_bytes":1037959168,"non_heap_used_in_bytes":55332224,"non_heap_committed_in_bytes":56311808,"pools":{"young":{"used_in_bytes":60449896,"max_in_bytes":286326784,"peak_used_in_bytes":71630848,"peak_max_in_bytes":286326784},"survivor":{"used_in_bytes":8912896,"max_in_bytes":35782656,"peak_used_in_bytes":8912896,"peak_max_in_bytes":35782656},"old":{"used_in_bytes":19306696,"max_in_bytes":715849728,"peak_used_in_bytes":19306696,"peak_max_in_bytes":715849728}}},"threads":{"count":88,"peak_count":88},"gc":{"collectors":{"young":{"collection_count":4,"collection_time_in_millis":56},"old":{"collection_count":1,"collection_time_in_millis":10}}},"buffer_pools":{"direct":{"count":131,"used_in_bytes":25261747,"total_capacity_in_bytes":25261747},"mapped":{"count":0,"used_in_bytes":0,"total_capacity_in_bytes":0}}},"thread_pool":{"percolate":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"bench":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"listener":{"threads":4,"queue":0,"active":0,"rejected":0,"largest":4,"completed":427},"index":{"threads":8,"queue":0,"active":0,"rejected":0,"largest":8,"completed":16},"refresh":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":8},"suggest":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"generic":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":4,"completed":273},"warmer":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":24},"search":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"flush":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":3},"optimize":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"management":{"threads":5,"queue":0,"active":1,"rejected":0,"largest":5,"completed":306},"get":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"merge":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":4},"bulk":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"snapshot":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0}},"network":{"tcp":{"active_opens":74884,"passive_opens":1563,"curr_estab":190,"in_segs":13376197,"out_segs":13484803,"retrans_segs":16615,"estab_resets":7275,"attempt_fails":2949,"in_errs":0,"out_rsts":-1}},"fs":{"timestamp":1427818890925,"total":{"total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0},"data":[{"path":"/Users/leonardo.menezes/Downloads/elasticsearch-1.4.1/data/elasticsearch/nodes/0","mount":"/","dev":"/dev/disk1","total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0}]},"transport":{"server_open":26,"rx_count":1319,"rx_size_in_bytes":445061,"tx_count":1297,"tx_size_in_bytes":101144},"http":{"current_open":12,"total_opened":111},"breakers":{"fielddata":{"limit_size_in_bytes":622775500,"limit_size":"593.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.03,"tripped":0},"request":{"limit_size_in_bytes":415183667,"limit_size":"395.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0},"parent":{"limit_size_in_bytes":726571417,"limit_size":"692.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0}}},"F3KsjayGTwSYky6igNwz9w":{"timestamp":1427818890923,"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9301]","host":"nb-lmenezes","ip":["inet[/192.168.2.39:9301]","NONE"],"indices":{"docs":{"count":4,"deleted":0},"store":{"size_in_bytes":3476,"throttle_time_in_millis":0},"indexing":{"index_total":16,"index_time_in_millis":66,"index_current":0,"delete_total":0,"delete_time_in_millis":0,"delete_current":0,"noop_update_total":0,"is_throttled":false,"throttle_time_in_millis":0},"get":{"total":0,"time_in_millis":0,"exists_total":0,"exists_time_in_millis":0,"missing_total":0,"missing_time_in_millis":0,"current":0},"search":{"open_contexts":0,"query_total":0,"query_time_in_millis":0,"query_current":0,"fetch_total":0,"fetch_time_in_millis":0,"fetch_current":0},"merges":{"current":0,"current_docs":0,"current_size_in_bytes":0,"total":0,"total_time_in_millis":0,"total_docs":0,"total_size_in_bytes":0},"refresh":{"total":17,"total_time_in_millis":114},"flush":{"total":0,"total_time_in_millis":0},"warmer":{"current":0,"total":6,"total_time_in_millis":1},"filter_cache":{"memory_size_in_bytes":0,"evictions":0},"id_cache":{"memory_size_in_bytes":0},"fielddata":{"memory_size_in_bytes":0,"evictions":0},"percolate":{"total":0,"time_in_millis":0,"current":0,"memory_size_in_bytes":-1,"memory_size":"-1b","queries":0},"completion":{"size_in_bytes":0},"segments":{"count":1,"memory_in_bytes":8738,"index_writer_memory_in_bytes":0,"index_writer_max_memory_in_bytes":134217728,"version_map_memory_in_bytes":0,"fixed_bit_set_memory_in_bytes":48},"translog":{"operations":4,"size_in_bytes":0},"suggest":{"total":0,"time_in_millis":0,"current":0},"query_cache":{"memory_size_in_bytes":0,"evictions":0,"hit_count":0,"miss_count":0}},"os":{"timestamp":1427818890924,"uptime_in_millis":375434,"load_average":[2.767578125,2.66650390625,2.46484375],"cpu":{"sys":4,"user":14,"idle":81,"usage":18,"stolen":0},"mem":{"free_in_bytes":152559616,"used_in_bytes":8437374976,"free_percent":26,"used_percent":73,"actual_free_in_bytes":2301149184,"actual_used_in_bytes":6288785408},"swap":{"used_in_bytes":469499904,"free_in_bytes":604241920}},"process":{"timestamp":1427818890924,"open_file_descriptors":269,"cpu":{"percent":2,"sys_in_millis":7960,"user_in_millis":22082,"total_in_millis":30042},"mem":{"resident_in_bytes":264425472,"share_in_bytes":-1,"total_virtual_in_bytes":5242892288}},"jvm":{"timestamp":1427818890924,"uptime_in_millis":1260290,"mem":{"heap_used_in_bytes":80714736,"heap_used_percent":7,"heap_committed_in_bytes":259522560,"heap_max_in_bytes":1037959168,"non_heap_used_in_bytes":55446520,"non_heap_committed_in_bytes":56246272,"pools":{"young":{"used_in_bytes":57928496,"max_in_bytes":286326784,"peak_used_in_bytes":71630848,"peak_max_in_bytes":286326784},"survivor":{"used_in_bytes":6086936,"max_in_bytes":35782656,"peak_used_in_bytes":8912896,"peak_max_in_bytes":35782656},"old":{"used_in_bytes":16699304,"max_in_bytes":715849728,"peak_used_in_bytes":16699304,"peak_max_in_bytes":715849728}}},"threads":{"count":89,"peak_count":91},"gc":{"collectors":{"young":{"collection_count":5,"collection_time_in_millis":64},"old":{"collection_count":1,"collection_time_in_millis":14}}},"buffer_pools":{"direct":{"count":97,"used_in_bytes":19931794,"total_capacity_in_bytes":19931794},"mapped":{"count":0,"used_in_bytes":0,"total_capacity_in_bytes":0}}},"thread_pool":{"percolate":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"bench":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"listener":{"threads":4,"queue":0,"active":0,"rejected":0,"largest":4,"completed":427},"index":{"threads":8,"queue":0,"active":0,"rejected":0,"largest":8,"completed":16},"refresh":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":8},"suggest":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"generic":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":5,"completed":1479},"warmer":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":30},"search":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"flush":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":3},"optimize":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"management":{"threads":5,"queue":0,"active":1,"rejected":0,"largest":5,"completed":6381},"get":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"merge":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":4},"bulk":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"snapshot":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0}},"network":{"tcp":{"active_opens":74884,"passive_opens":1563,"curr_estab":190,"in_segs":13376197,"out_segs":13484803,"retrans_segs":16615,"estab_resets":7275,"attempt_fails":2949,"in_errs":0,"out_rsts":-1}},"fs":{"timestamp":1427818890925,"total":{"total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0},"data":[{"path":"/Users/leonardo.menezes/Downloads/elasticsearch-1.4.1/data/elasticsearch/nodes/1","mount":"/","dev":"/dev/disk1","total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0}]},"transport":{"server_open":26,"rx_count":9616,"rx_size_in_bytes":748959,"tx_count":9607,"tx_size_in_bytes":1999112},"http":{"current_open":0,"total_opened":0},"breakers":{"fielddata":{"limit_size_in_bytes":622775500,"limit_size":"593.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.03,"tripped":0},"request":{"limit_size_in_bytes":415183667,"limit_size":"395.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0},"parent":{"limit_size_in_bytes":726571417,"limit_size":"692.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0}}}}}');
  var settings2 = JSON.parse('{"foobaz":{"settings":{"index":{"creation_date":"1427818889470","analysis":{"analyzer":{"index_inc_search":{"filter":["lowercase"],"tokenizer":"whitespace"}}},"number_of_shards":"1","number_of_replicas":"2","version":{"created":"1040199"},"uuid":"4Ve107bNSh6modc72wM55Q"}}},"foobar":{"settings":{"index":{"creation_date":"1427818889366","analysis":{"analyzer":{"index_inc_search":{"filter":["lowercase"],"tokenizer":"whitespace"}}},"number_of_shards":"2","number_of_replicas":"0","version":{"created":"1040199"},"uuid":"kYsuZGfTQwOeD_iRtCZJ6A"}}}}');
  var aliases2 = JSON.parse('{"foobaz":{},"foobar":{},"qux":{}}');
  var health2 = JSON.parse('{"cluster_name":"elasticsearch","status":"yellow","timed_out":false,"number_of_nodes":2,"number_of_data_nodes":2,"active_primary_shards":3,"active_shards":4,"relocating_shards":0,"initializing_shards":0,"unassigned_shards":1}');
  var cluster2 = new Cluster(health2, state2, indexStats2, nodeStats2, settings2, aliases2);

  cluster2.computeChanges(cluster);

  ok(cluster2.changes.getDocDelta() == -1, "Checking document delta ");
  ok(cluster2.changes.getDataDelta() == 1000,
      "" + cluster2.changes.getDataDelta());
  ok(cluster2.changes.absDataDelta() == "1000.00b",
      "" + cluster2.changes.absDataDelta());

  ok(cluster2.changes.nodeJoins.length == 1, "checking joinng nodes");
  ok(cluster2.changes.nodeLeaves.length == 1, "checking disconnecting nodes");

  ok(cluster2.changes.nodeJoins[0].id == "GuH0hk40ROSf2SRc13U6sf",
      "checking node identity");
  ok(cluster2.changes.nodeLeaves[0].id == "GuH0hk40ROSf2SRc13U6sw",
      "checking node identity");
});

test("computing cluster changes on two different clusters should yield no changes",
    function() {
      var state = JSON.parse('{"cluster_name":"elasticsearch","master_node":"F3KsjayGTwSYky6igNwz9w","blocks":{"indices":{"qux":{"4":{"description":"index closed","retryable":false,"levels":["read","write"]}}}},"nodes":{"GuH0hk40ROSf2SRc13U6sw":{"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9300]","attributes":{}},"F3KsjayGTwSYky6igNwz9w":{"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9301]","attributes":{}}},"routing_table":{"indices":{"foobar":{"shards":{"0":[{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sw","relocating_node":null,"shard":0,"index":"foobar"}],"1":[{"state":"STARTED","primary":true,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":1,"index":"foobar"}]}},"foobaz":{"shards":{"0":[{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sw","relocating_node":null,"shard":0,"index":"foobaz"},{"state":"STARTED","primary":false,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":0,"index":"foobaz"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":0,"index":"foobaz"}]}}}},"routing_nodes":{"unassigned":[{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":0,"index":"foobaz"}],"nodes":{"GuH0hk40ROSf2SRc13U6sw":[{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sw","relocating_node":null,"shard":0,"index":"foobar"},{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sw","relocating_node":null,"shard":0,"index":"foobaz"}],"F3KsjayGTwSYky6igNwz9w":[{"state":"STARTED","primary":true,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":1,"index":"foobar"},{"state":"STARTED","primary":false,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":0,"index":"foobaz"}]}},"allocations":[]}');
      var indexStats = JSON.parse('{"_shards":{"total":5,"successful":4,"failed":0},"_all":{"primaries":{"docs":{"count":8,"deleted":0},"store":{"size_in_bytes":6909,"throttle_time_in_millis":0}},"total":{"docs":{"count":8,"deleted":0},"store":{"size_in_bytes":6988,"throttle_time_in_millis":0}}},"indices":{"foobar":{"primaries":{"docs":{"count":8,"deleted":0},"store":{"size_in_bytes":6794,"throttle_time_in_millis":0}},"total":{"docs":{"count":8,"deleted":0},"store":{"size_in_bytes":6794,"throttle_time_in_millis":0}}},"foobaz":{"primaries":{"docs":{"count":0,"deleted":0},"store":{"size_in_bytes":115,"throttle_time_in_millis":0}},"total":{"docs":{"count":0,"deleted":0},"store":{"size_in_bytes":194,"throttle_time_in_millis":0}}}}}');
      var nodeStats = JSON.parse('{"cluster_name":"elasticsearch","nodes":{"GuH0hk40ROSf2SRc13U6sw":{"timestamp":1427818890923,"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9300]","host":"nb-lmenezes","ip":["inet[/192.168.2.39:9300]","NONE"],"indices":{"docs":{"count":4,"deleted":0},"store":{"size_in_bytes":3512,"throttle_time_in_millis":0},"indexing":{"index_total":16,"index_time_in_millis":72,"index_current":0,"delete_total":0,"delete_time_in_millis":0,"delete_current":0,"noop_update_total":0,"is_throttled":false,"throttle_time_in_millis":0},"get":{"total":0,"time_in_millis":0,"exists_total":0,"exists_time_in_millis":0,"missing_total":0,"missing_time_in_millis":0,"current":0},"search":{"open_contexts":0,"query_total":0,"query_time_in_millis":0,"query_current":0,"fetch_total":0,"fetch_time_in_millis":0,"fetch_current":0},"merges":{"current":0,"current_docs":0,"current_size_in_bytes":0,"total":0,"total_time_in_millis":0,"total_docs":0,"total_size_in_bytes":0},"refresh":{"total":16,"total_time_in_millis":136},"flush":{"total":0,"total_time_in_millis":0},"warmer":{"current":0,"total":6,"total_time_in_millis":1},"filter_cache":{"memory_size_in_bytes":0,"evictions":0},"id_cache":{"memory_size_in_bytes":0},"fielddata":{"memory_size_in_bytes":0,"evictions":0},"percolate":{"total":0,"time_in_millis":0,"current":0,"memory_size_in_bytes":-1,"memory_size":"-1b","queries":0},"completion":{"size_in_bytes":0},"segments":{"count":1,"memory_in_bytes":8738,"index_writer_memory_in_bytes":0,"index_writer_max_memory_in_bytes":134217728,"version_map_memory_in_bytes":0,"fixed_bit_set_memory_in_bytes":96},"translog":{"operations":4,"size_in_bytes":17},"suggest":{"total":0,"time_in_millis":0,"current":0},"query_cache":{"memory_size_in_bytes":0,"evictions":0,"hit_count":0,"miss_count":0}},"os":{"timestamp":1427818890924,"uptime_in_millis":375434,"load_average":[2.767578125,2.66650390625,2.46484375],"cpu":{"sys":4,"user":14,"idle":81,"usage":18,"stolen":0},"mem":{"free_in_bytes":152559616,"used_in_bytes":8437374976,"free_percent":26,"used_percent":73,"actual_free_in_bytes":2301149184,"actual_used_in_bytes":6288785408},"swap":{"used_in_bytes":469499904,"free_in_bytes":604241920}},"process":{"timestamp":1427818890924,"open_file_descriptors":281,"cpu":{"percent":3,"sys_in_millis":1910,"user_in_millis":14999,"total_in_millis":16909},"mem":{"resident_in_bytes":346849280,"share_in_bytes":-1,"total_virtual_in_bytes":5256888320}},"jvm":{"timestamp":1427818890924,"uptime_in_millis":171737,"mem":{"heap_used_in_bytes":88669488,"heap_used_percent":8,"heap_committed_in_bytes":259522560,"heap_max_in_bytes":1037959168,"non_heap_used_in_bytes":55332224,"non_heap_committed_in_bytes":56311808,"pools":{"young":{"used_in_bytes":60449896,"max_in_bytes":286326784,"peak_used_in_bytes":71630848,"peak_max_in_bytes":286326784},"survivor":{"used_in_bytes":8912896,"max_in_bytes":35782656,"peak_used_in_bytes":8912896,"peak_max_in_bytes":35782656},"old":{"used_in_bytes":19306696,"max_in_bytes":715849728,"peak_used_in_bytes":19306696,"peak_max_in_bytes":715849728}}},"threads":{"count":88,"peak_count":88},"gc":{"collectors":{"young":{"collection_count":4,"collection_time_in_millis":56},"old":{"collection_count":1,"collection_time_in_millis":10}}},"buffer_pools":{"direct":{"count":131,"used_in_bytes":25261747,"total_capacity_in_bytes":25261747},"mapped":{"count":0,"used_in_bytes":0,"total_capacity_in_bytes":0}}},"thread_pool":{"percolate":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"bench":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"listener":{"threads":4,"queue":0,"active":0,"rejected":0,"largest":4,"completed":427},"index":{"threads":8,"queue":0,"active":0,"rejected":0,"largest":8,"completed":16},"refresh":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":8},"suggest":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"generic":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":4,"completed":273},"warmer":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":24},"search":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"flush":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":3},"optimize":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"management":{"threads":5,"queue":0,"active":1,"rejected":0,"largest":5,"completed":306},"get":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"merge":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":4},"bulk":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"snapshot":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0}},"network":{"tcp":{"active_opens":74884,"passive_opens":1563,"curr_estab":190,"in_segs":13376197,"out_segs":13484803,"retrans_segs":16615,"estab_resets":7275,"attempt_fails":2949,"in_errs":0,"out_rsts":-1}},"fs":{"timestamp":1427818890925,"total":{"total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0},"data":[{"path":"/Users/leonardo.menezes/Downloads/elasticsearch-1.4.1/data/elasticsearch/nodes/0","mount":"/","dev":"/dev/disk1","total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0}]},"transport":{"server_open":26,"rx_count":1319,"rx_size_in_bytes":445061,"tx_count":1297,"tx_size_in_bytes":101144},"http":{"current_open":12,"total_opened":111},"breakers":{"fielddata":{"limit_size_in_bytes":622775500,"limit_size":"593.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.03,"tripped":0},"request":{"limit_size_in_bytes":415183667,"limit_size":"395.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0},"parent":{"limit_size_in_bytes":726571417,"limit_size":"692.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0}}},"F3KsjayGTwSYky6igNwz9w":{"timestamp":1427818890923,"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9301]","host":"nb-lmenezes","ip":["inet[/192.168.2.39:9301]","NONE"],"indices":{"docs":{"count":4,"deleted":0},"store":{"size_in_bytes":3476,"throttle_time_in_millis":0},"indexing":{"index_total":16,"index_time_in_millis":66,"index_current":0,"delete_total":0,"delete_time_in_millis":0,"delete_current":0,"noop_update_total":0,"is_throttled":false,"throttle_time_in_millis":0},"get":{"total":0,"time_in_millis":0,"exists_total":0,"exists_time_in_millis":0,"missing_total":0,"missing_time_in_millis":0,"current":0},"search":{"open_contexts":0,"query_total":0,"query_time_in_millis":0,"query_current":0,"fetch_total":0,"fetch_time_in_millis":0,"fetch_current":0},"merges":{"current":0,"current_docs":0,"current_size_in_bytes":0,"total":0,"total_time_in_millis":0,"total_docs":0,"total_size_in_bytes":0},"refresh":{"total":17,"total_time_in_millis":114},"flush":{"total":0,"total_time_in_millis":0},"warmer":{"current":0,"total":6,"total_time_in_millis":1},"filter_cache":{"memory_size_in_bytes":0,"evictions":0},"id_cache":{"memory_size_in_bytes":0},"fielddata":{"memory_size_in_bytes":0,"evictions":0},"percolate":{"total":0,"time_in_millis":0,"current":0,"memory_size_in_bytes":-1,"memory_size":"-1b","queries":0},"completion":{"size_in_bytes":0},"segments":{"count":1,"memory_in_bytes":8738,"index_writer_memory_in_bytes":0,"index_writer_max_memory_in_bytes":134217728,"version_map_memory_in_bytes":0,"fixed_bit_set_memory_in_bytes":48},"translog":{"operations":4,"size_in_bytes":0},"suggest":{"total":0,"time_in_millis":0,"current":0},"query_cache":{"memory_size_in_bytes":0,"evictions":0,"hit_count":0,"miss_count":0}},"os":{"timestamp":1427818890924,"uptime_in_millis":375434,"load_average":[2.767578125,2.66650390625,2.46484375],"cpu":{"sys":4,"user":14,"idle":81,"usage":18,"stolen":0},"mem":{"free_in_bytes":152559616,"used_in_bytes":8437374976,"free_percent":26,"used_percent":73,"actual_free_in_bytes":2301149184,"actual_used_in_bytes":6288785408},"swap":{"used_in_bytes":469499904,"free_in_bytes":604241920}},"process":{"timestamp":1427818890924,"open_file_descriptors":269,"cpu":{"percent":2,"sys_in_millis":7960,"user_in_millis":22082,"total_in_millis":30042},"mem":{"resident_in_bytes":264425472,"share_in_bytes":-1,"total_virtual_in_bytes":5242892288}},"jvm":{"timestamp":1427818890924,"uptime_in_millis":1260290,"mem":{"heap_used_in_bytes":80714736,"heap_used_percent":7,"heap_committed_in_bytes":259522560,"heap_max_in_bytes":1037959168,"non_heap_used_in_bytes":55446520,"non_heap_committed_in_bytes":56246272,"pools":{"young":{"used_in_bytes":57928496,"max_in_bytes":286326784,"peak_used_in_bytes":71630848,"peak_max_in_bytes":286326784},"survivor":{"used_in_bytes":6086936,"max_in_bytes":35782656,"peak_used_in_bytes":8912896,"peak_max_in_bytes":35782656},"old":{"used_in_bytes":16699304,"max_in_bytes":715849728,"peak_used_in_bytes":16699304,"peak_max_in_bytes":715849728}}},"threads":{"count":89,"peak_count":91},"gc":{"collectors":{"young":{"collection_count":5,"collection_time_in_millis":64},"old":{"collection_count":1,"collection_time_in_millis":14}}},"buffer_pools":{"direct":{"count":97,"used_in_bytes":19931794,"total_capacity_in_bytes":19931794},"mapped":{"count":0,"used_in_bytes":0,"total_capacity_in_bytes":0}}},"thread_pool":{"percolate":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"bench":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"listener":{"threads":4,"queue":0,"active":0,"rejected":0,"largest":4,"completed":427},"index":{"threads":8,"queue":0,"active":0,"rejected":0,"largest":8,"completed":16},"refresh":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":8},"suggest":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"generic":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":5,"completed":1479},"warmer":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":30},"search":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"flush":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":3},"optimize":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"management":{"threads":5,"queue":0,"active":1,"rejected":0,"largest":5,"completed":6381},"get":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"merge":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":4},"bulk":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"snapshot":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0}},"network":{"tcp":{"active_opens":74884,"passive_opens":1563,"curr_estab":190,"in_segs":13376197,"out_segs":13484803,"retrans_segs":16615,"estab_resets":7275,"attempt_fails":2949,"in_errs":0,"out_rsts":-1}},"fs":{"timestamp":1427818890925,"total":{"total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0},"data":[{"path":"/Users/leonardo.menezes/Downloads/elasticsearch-1.4.1/data/elasticsearch/nodes/1","mount":"/","dev":"/dev/disk1","total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0}]},"transport":{"server_open":26,"rx_count":9616,"rx_size_in_bytes":748959,"tx_count":9607,"tx_size_in_bytes":1999112},"http":{"current_open":0,"total_opened":0},"breakers":{"fielddata":{"limit_size_in_bytes":622775500,"limit_size":"593.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.03,"tripped":0},"request":{"limit_size_in_bytes":415183667,"limit_size":"395.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0},"parent":{"limit_size_in_bytes":726571417,"limit_size":"692.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0}}}}}');
      var settings = JSON.parse('{"foobaz":{"settings":{"index":{"creation_date":"1427818889470","analysis":{"analyzer":{"index_inc_search":{"filter":["lowercase"],"tokenizer":"whitespace"}}},"number_of_shards":"1","number_of_replicas":"2","version":{"created":"1040199"},"uuid":"4Ve107bNSh6modc72wM55Q"}}},"foobar":{"settings":{"index":{"creation_date":"1427818889366","analysis":{"analyzer":{"index_inc_search":{"filter":["lowercase"],"tokenizer":"whitespace"}}},"number_of_shards":"2","number_of_replicas":"0","version":{"created":"1040199"},"uuid":"kYsuZGfTQwOeD_iRtCZJ6A"}}}}');
      var aliases = JSON.parse('{"foobaz":{},"foobar":{},"qux":{}}');
      var health = JSON.parse('{"cluster_name":"elasticsearch","status":"yellow","timed_out":false,"number_of_nodes":2,"number_of_data_nodes":2,"active_primary_shards":3,"active_shards":4,"relocating_shards":0,"initializing_shards":0,"unassigned_shards":1}');
      var cluster = new Cluster(health, state, indexStats, nodeStats, settings, aliases);

      var state2 = JSON.parse('{"cluster_name":"elasticsearch2","master_node":"F3KsjayGTwSYky6igNwz9w","blocks":{"indices":{"qux":{"4":{"description":"index closed","retryable":false,"levels":["read","write"]}}}},"nodes":{"GuH0hk40ROSf2SRc13U6sw":{"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9300]","attributes":{}},"F3KsjayGTwSYky6igNwz9w":{"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9301]","attributes":{}}},"routing_table":{"indices":{"foobar":{"shards":{"0":[{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sw","relocating_node":null,"shard":0,"index":"foobar"}],"1":[{"state":"STARTED","primary":true,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":1,"index":"foobar"}]}},"foobaz":{"shards":{"0":[{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sw","relocating_node":null,"shard":0,"index":"foobaz"},{"state":"STARTED","primary":false,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":0,"index":"foobaz"},{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":0,"index":"foobaz"}]}}}},"routing_nodes":{"unassigned":[{"state":"UNASSIGNED","primary":false,"node":null,"relocating_node":null,"shard":0,"index":"foobaz"}],"nodes":{"GuH0hk40ROSf2SRc13U6sw":[{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sw","relocating_node":null,"shard":0,"index":"foobar"},{"state":"STARTED","primary":true,"node":"GuH0hk40ROSf2SRc13U6sw","relocating_node":null,"shard":0,"index":"foobaz"}],"F3KsjayGTwSYky6igNwz9w":[{"state":"STARTED","primary":true,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":1,"index":"foobar"},{"state":"STARTED","primary":false,"node":"F3KsjayGTwSYky6igNwz9w","relocating_node":null,"shard":0,"index":"foobaz"}]}},"allocations":[]}');
      var indexStats2 = JSON.parse('{"_shards":{"total":5,"successful":4,"failed":0},"_all":{"primaries":{"docs":{"count":8,"deleted":0},"store":{"size_in_bytes":6909,"throttle_time_in_millis":0}},"total":{"docs":{"count":8,"deleted":0},"store":{"size_in_bytes":6988,"throttle_time_in_millis":0}}},"indices":{"foobar":{"primaries":{"docs":{"count":8,"deleted":0},"store":{"size_in_bytes":6794,"throttle_time_in_millis":0}},"total":{"docs":{"count":8,"deleted":0},"store":{"size_in_bytes":6794,"throttle_time_in_millis":0}}},"foobaz":{"primaries":{"docs":{"count":0,"deleted":0},"store":{"size_in_bytes":115,"throttle_time_in_millis":0}},"total":{"docs":{"count":0,"deleted":0},"store":{"size_in_bytes":194,"throttle_time_in_millis":0}}}}}');
      var nodeStats2 = JSON.parse('{"cluster_name":"elasticsearch","nodes":{"GuH0hk40ROSf2SRc13U6sw":{"timestamp":1427818890923,"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9300]","host":"nb-lmenezes","ip":["inet[/192.168.2.39:9300]","NONE"],"indices":{"docs":{"count":4,"deleted":0},"store":{"size_in_bytes":3512,"throttle_time_in_millis":0},"indexing":{"index_total":16,"index_time_in_millis":72,"index_current":0,"delete_total":0,"delete_time_in_millis":0,"delete_current":0,"noop_update_total":0,"is_throttled":false,"throttle_time_in_millis":0},"get":{"total":0,"time_in_millis":0,"exists_total":0,"exists_time_in_millis":0,"missing_total":0,"missing_time_in_millis":0,"current":0},"search":{"open_contexts":0,"query_total":0,"query_time_in_millis":0,"query_current":0,"fetch_total":0,"fetch_time_in_millis":0,"fetch_current":0},"merges":{"current":0,"current_docs":0,"current_size_in_bytes":0,"total":0,"total_time_in_millis":0,"total_docs":0,"total_size_in_bytes":0},"refresh":{"total":16,"total_time_in_millis":136},"flush":{"total":0,"total_time_in_millis":0},"warmer":{"current":0,"total":6,"total_time_in_millis":1},"filter_cache":{"memory_size_in_bytes":0,"evictions":0},"id_cache":{"memory_size_in_bytes":0},"fielddata":{"memory_size_in_bytes":0,"evictions":0},"percolate":{"total":0,"time_in_millis":0,"current":0,"memory_size_in_bytes":-1,"memory_size":"-1b","queries":0},"completion":{"size_in_bytes":0},"segments":{"count":1,"memory_in_bytes":8738,"index_writer_memory_in_bytes":0,"index_writer_max_memory_in_bytes":134217728,"version_map_memory_in_bytes":0,"fixed_bit_set_memory_in_bytes":96},"translog":{"operations":4,"size_in_bytes":17},"suggest":{"total":0,"time_in_millis":0,"current":0},"query_cache":{"memory_size_in_bytes":0,"evictions":0,"hit_count":0,"miss_count":0}},"os":{"timestamp":1427818890924,"uptime_in_millis":375434,"load_average":[2.767578125,2.66650390625,2.46484375],"cpu":{"sys":4,"user":14,"idle":81,"usage":18,"stolen":0},"mem":{"free_in_bytes":152559616,"used_in_bytes":8437374976,"free_percent":26,"used_percent":73,"actual_free_in_bytes":2301149184,"actual_used_in_bytes":6288785408},"swap":{"used_in_bytes":469499904,"free_in_bytes":604241920}},"process":{"timestamp":1427818890924,"open_file_descriptors":281,"cpu":{"percent":3,"sys_in_millis":1910,"user_in_millis":14999,"total_in_millis":16909},"mem":{"resident_in_bytes":346849280,"share_in_bytes":-1,"total_virtual_in_bytes":5256888320}},"jvm":{"timestamp":1427818890924,"uptime_in_millis":171737,"mem":{"heap_used_in_bytes":88669488,"heap_used_percent":8,"heap_committed_in_bytes":259522560,"heap_max_in_bytes":1037959168,"non_heap_used_in_bytes":55332224,"non_heap_committed_in_bytes":56311808,"pools":{"young":{"used_in_bytes":60449896,"max_in_bytes":286326784,"peak_used_in_bytes":71630848,"peak_max_in_bytes":286326784},"survivor":{"used_in_bytes":8912896,"max_in_bytes":35782656,"peak_used_in_bytes":8912896,"peak_max_in_bytes":35782656},"old":{"used_in_bytes":19306696,"max_in_bytes":715849728,"peak_used_in_bytes":19306696,"peak_max_in_bytes":715849728}}},"threads":{"count":88,"peak_count":88},"gc":{"collectors":{"young":{"collection_count":4,"collection_time_in_millis":56},"old":{"collection_count":1,"collection_time_in_millis":10}}},"buffer_pools":{"direct":{"count":131,"used_in_bytes":25261747,"total_capacity_in_bytes":25261747},"mapped":{"count":0,"used_in_bytes":0,"total_capacity_in_bytes":0}}},"thread_pool":{"percolate":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"bench":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"listener":{"threads":4,"queue":0,"active":0,"rejected":0,"largest":4,"completed":427},"index":{"threads":8,"queue":0,"active":0,"rejected":0,"largest":8,"completed":16},"refresh":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":8},"suggest":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"generic":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":4,"completed":273},"warmer":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":24},"search":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"flush":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":3},"optimize":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"management":{"threads":5,"queue":0,"active":1,"rejected":0,"largest":5,"completed":306},"get":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"merge":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":4},"bulk":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"snapshot":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0}},"network":{"tcp":{"active_opens":74884,"passive_opens":1563,"curr_estab":190,"in_segs":13376197,"out_segs":13484803,"retrans_segs":16615,"estab_resets":7275,"attempt_fails":2949,"in_errs":0,"out_rsts":-1}},"fs":{"timestamp":1427818890925,"total":{"total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0},"data":[{"path":"/Users/leonardo.menezes/Downloads/elasticsearch-1.4.1/data/elasticsearch/nodes/0","mount":"/","dev":"/dev/disk1","total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0}]},"transport":{"server_open":26,"rx_count":1319,"rx_size_in_bytes":445061,"tx_count":1297,"tx_size_in_bytes":101144},"http":{"current_open":12,"total_opened":111},"breakers":{"fielddata":{"limit_size_in_bytes":622775500,"limit_size":"593.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.03,"tripped":0},"request":{"limit_size_in_bytes":415183667,"limit_size":"395.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0},"parent":{"limit_size_in_bytes":726571417,"limit_size":"692.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0}}},"F3KsjayGTwSYky6igNwz9w":{"timestamp":1427818890923,"name":"Jessica Jones","transport_address":"inet[/192.168.2.39:9301]","host":"nb-lmenezes","ip":["inet[/192.168.2.39:9301]","NONE"],"indices":{"docs":{"count":4,"deleted":0},"store":{"size_in_bytes":3476,"throttle_time_in_millis":0},"indexing":{"index_total":16,"index_time_in_millis":66,"index_current":0,"delete_total":0,"delete_time_in_millis":0,"delete_current":0,"noop_update_total":0,"is_throttled":false,"throttle_time_in_millis":0},"get":{"total":0,"time_in_millis":0,"exists_total":0,"exists_time_in_millis":0,"missing_total":0,"missing_time_in_millis":0,"current":0},"search":{"open_contexts":0,"query_total":0,"query_time_in_millis":0,"query_current":0,"fetch_total":0,"fetch_time_in_millis":0,"fetch_current":0},"merges":{"current":0,"current_docs":0,"current_size_in_bytes":0,"total":0,"total_time_in_millis":0,"total_docs":0,"total_size_in_bytes":0},"refresh":{"total":17,"total_time_in_millis":114},"flush":{"total":0,"total_time_in_millis":0},"warmer":{"current":0,"total":6,"total_time_in_millis":1},"filter_cache":{"memory_size_in_bytes":0,"evictions":0},"id_cache":{"memory_size_in_bytes":0},"fielddata":{"memory_size_in_bytes":0,"evictions":0},"percolate":{"total":0,"time_in_millis":0,"current":0,"memory_size_in_bytes":-1,"memory_size":"-1b","queries":0},"completion":{"size_in_bytes":0},"segments":{"count":1,"memory_in_bytes":8738,"index_writer_memory_in_bytes":0,"index_writer_max_memory_in_bytes":134217728,"version_map_memory_in_bytes":0,"fixed_bit_set_memory_in_bytes":48},"translog":{"operations":4,"size_in_bytes":0},"suggest":{"total":0,"time_in_millis":0,"current":0},"query_cache":{"memory_size_in_bytes":0,"evictions":0,"hit_count":0,"miss_count":0}},"os":{"timestamp":1427818890924,"uptime_in_millis":375434,"load_average":[2.767578125,2.66650390625,2.46484375],"cpu":{"sys":4,"user":14,"idle":81,"usage":18,"stolen":0},"mem":{"free_in_bytes":152559616,"used_in_bytes":8437374976,"free_percent":26,"used_percent":73,"actual_free_in_bytes":2301149184,"actual_used_in_bytes":6288785408},"swap":{"used_in_bytes":469499904,"free_in_bytes":604241920}},"process":{"timestamp":1427818890924,"open_file_descriptors":269,"cpu":{"percent":2,"sys_in_millis":7960,"user_in_millis":22082,"total_in_millis":30042},"mem":{"resident_in_bytes":264425472,"share_in_bytes":-1,"total_virtual_in_bytes":5242892288}},"jvm":{"timestamp":1427818890924,"uptime_in_millis":1260290,"mem":{"heap_used_in_bytes":80714736,"heap_used_percent":7,"heap_committed_in_bytes":259522560,"heap_max_in_bytes":1037959168,"non_heap_used_in_bytes":55446520,"non_heap_committed_in_bytes":56246272,"pools":{"young":{"used_in_bytes":57928496,"max_in_bytes":286326784,"peak_used_in_bytes":71630848,"peak_max_in_bytes":286326784},"survivor":{"used_in_bytes":6086936,"max_in_bytes":35782656,"peak_used_in_bytes":8912896,"peak_max_in_bytes":35782656},"old":{"used_in_bytes":16699304,"max_in_bytes":715849728,"peak_used_in_bytes":16699304,"peak_max_in_bytes":715849728}}},"threads":{"count":89,"peak_count":91},"gc":{"collectors":{"young":{"collection_count":5,"collection_time_in_millis":64},"old":{"collection_count":1,"collection_time_in_millis":14}}},"buffer_pools":{"direct":{"count":97,"used_in_bytes":19931794,"total_capacity_in_bytes":19931794},"mapped":{"count":0,"used_in_bytes":0,"total_capacity_in_bytes":0}}},"thread_pool":{"percolate":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"bench":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"listener":{"threads":4,"queue":0,"active":0,"rejected":0,"largest":4,"completed":427},"index":{"threads":8,"queue":0,"active":0,"rejected":0,"largest":8,"completed":16},"refresh":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":8},"suggest":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"generic":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":5,"completed":1479},"warmer":{"threads":2,"queue":0,"active":0,"rejected":0,"largest":2,"completed":30},"search":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"flush":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":3},"optimize":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"management":{"threads":5,"queue":0,"active":1,"rejected":0,"largest":5,"completed":6381},"get":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"merge":{"threads":1,"queue":0,"active":0,"rejected":0,"largest":1,"completed":4},"bulk":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0},"snapshot":{"threads":0,"queue":0,"active":0,"rejected":0,"largest":0,"completed":0}},"network":{"tcp":{"active_opens":74884,"passive_opens":1563,"curr_estab":190,"in_segs":13376197,"out_segs":13484803,"retrans_segs":16615,"estab_resets":7275,"attempt_fails":2949,"in_errs":0,"out_rsts":-1}},"fs":{"timestamp":1427818890925,"total":{"total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0},"data":[{"path":"/Users/leonardo.menezes/Downloads/elasticsearch-1.4.1/data/elasticsearch/nodes/1","mount":"/","dev":"/dev/disk1","total_in_bytes":249804886016,"free_in_bytes":68642553856,"available_in_bytes":68380409856,"disk_reads":0,"disk_writes":0,"disk_io_op":0,"disk_read_size_in_bytes":0,"disk_write_size_in_bytes":0,"disk_io_size_in_bytes":0}]},"transport":{"server_open":26,"rx_count":9616,"rx_size_in_bytes":748959,"tx_count":9607,"tx_size_in_bytes":1999112},"http":{"current_open":0,"total_opened":0},"breakers":{"fielddata":{"limit_size_in_bytes":622775500,"limit_size":"593.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.03,"tripped":0},"request":{"limit_size_in_bytes":415183667,"limit_size":"395.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0},"parent":{"limit_size_in_bytes":726571417,"limit_size":"692.9mb","estimated_size_in_bytes":0,"estimated_size":"0b","overhead":1.0,"tripped":0}}}}}');
      var settings2 = JSON.parse('{"foobaz":{"settings":{"index":{"creation_date":"1427818889470","analysis":{"analyzer":{"index_inc_search":{"filter":["lowercase"],"tokenizer":"whitespace"}}},"number_of_shards":"1","number_of_replicas":"2","version":{"created":"1040199"},"uuid":"4Ve107bNSh6modc72wM55Q"}}},"foobar":{"settings":{"index":{"creation_date":"1427818889366","analysis":{"analyzer":{"index_inc_search":{"filter":["lowercase"],"tokenizer":"whitespace"}}},"number_of_shards":"2","number_of_replicas":"0","version":{"created":"1040199"},"uuid":"kYsuZGfTQwOeD_iRtCZJ6A"}}}}');
      var aliases2 = JSON.parse('{"foobaz":{},"foobar":{},"qux":{}}');
      var health2 = JSON.parse('{"cluster_name":"elasticsearch","status":"yellow","timed_out":false,"number_of_nodes":2,"number_of_data_nodes":2,"active_primary_shards":3,"active_shards":4,"relocating_shards":0,"initializing_shards":0,"unassigned_shards":1}');
      var cluster2 = new Cluster(health2, state2, indexStats2, nodeStats2, settings2, aliases2);

      cluster2.computeChanges(cluster);
      ok(cluster2.changes.hasChanges() == false, "No changes");
    });
