<tr ng-repeat="node in getNodes()">
	<td class="cluster-map-node-cell">
		<div class="row">
			<div class="col-lg-1" class="cluster-map-node-badges">
				<div ng-switch on="node.master">
					<div ng-switch-when="true">
						<i ng-class="{true:'icon-star',false:'icon-star-empty'}[node.current_master]" title="master node"></i>
					</div>
				</div>
				<div><i ng-class="{true:'icon-search',false:''}[node.client]" title="client node"></i></div>
				<div><i ng-class="{true:'icon-hdd',false:''}[node.data]" title="data node"></i></div>
				<div><i class="icon-power-off normal-action" ng-click="shutdownNode(node.id)" title="shutdown node"></i></div>
			</div>
			<div class="col-lg-10">
				<div class="row">
					<div class="col-lg-12">
						<div class="cluster-map-node-name" ng-click="displayInfo(node.name + ' node stats',node.metadata)">{{node.name}}</div>
					</div>
				</div>
				<div class="row">
					<div class="col-lg-12">
						<div class="cluster-map-node-detail">{{node.transport_address}}</div>
						<div class="cluster-map-node-detail"><small>{{node.id}}</small></div>
					</div>
				</div>
				<div class="row">
						<div class="col-lg-12">
							<span class="cluster-map-node-stat">load: {{node.stats.os.load_average[0].toFixed(2)}}</span>
							<span class="cluster-map-node-stat">heap: {{node.stats.jvm.mem.heap_used}}/{{node.stats.jvm.mem.heap_committed}}</span>
						</div>
					</div>
				</div>
			</div>
		</div>
	</td>
	<td ng-repeat="index in pagination.getPage()">
		<div class="cluster-map-shards">
			<span id="{{shard.id}}" ng-switch on="shard.primary" ng-click="displayInfo('shard info',shard.info)" ng-repeat="shard in index.shards[node.id]">
				<span ng-switch-when="true" class="shard shard-primary" ng-class="{STARTED:'shard-started', INITIALIZING:'shard-initializing', 'RELOCATED':'shard-relocated', 	'RECOVERING':'shard-recovering','CLOSED':'shard-closed'}[shard.state]">{{shard.shard}}</span>
				<span ng-switch-default class="shard" ng-class="{STARTED:'shard-started', INITIALIZING:'shard-initializing', 'RELOCATED':'shard-relocated', 	'RECOVERING':'shard-recovering','CLOSED':'shard-closed'}[shard.state]">{{shard.shard}}</span>
			</span>
		</div>
	</td>
</tr>
<!-- Unassigned shards -->
<tr>
	<td class="node-cell">
		<div class="row">
			<div class="col-lg-1">
				<div class="row">
					<div class="col-lg-12">
						<i class="icon-exclamation-sign"></i>
					</div>
				</div>
			</div>
			<div class="col-lg-10">
				<div class="row">
					<div class="col-lg-12">
						<div class="cluster-map-node-name">unassigned shards</div>
					</div>
				</div>
			</div>
		</div>
	</td>
	<td ng-repeat="index in pagination.getPage()" class="shards">
		<div class="cluster-map-shards">
			<span ng-repeat="shard in index.unassigned" class="shard shard-unallocated">
				{{shard}}
			</span>
		</div>
	</td>
</tr>
